# Промпт для оптимизации Story Points Poker

## Проблема
При нажатии на кнопки голосования (карточки с цифрами) происходит заметный лаг. Визуальная реакция приходит только после ответа сервера, что создает плохой UX.

## Задача
Реализовать Optimistic UI + performance улучшения для устранения лага при взаимодействии с кнопками.

## Требования к реализации

### 1. Optimistic UI для карточек голосования
В файле `/app/room/[id]/page.tsx`:

- **Немедленное обновление UI**: При клике на карточку сразу обновлять локальное состояние (показывать выбранную карточку) ДО отправки запроса на сервер
- **Фоновая синхронизация**: Отправлять API запрос в фоне
- **Rollback при ошибке**: Если запрос упал — откатывать изменения и показывать ошибку
- **Сохранять текущую логику polling**: Не ломать существующий механизм обновления данных каждые 2 секунды

### 2. Performance улучшения

#### В `components/poker-card.tsx`:
- Заменить `transition-all` на конкретные свойства (например, `transition-transform, transition-colors, transition-border`)
- Добавить `will-change: transform` для анимируемых элементов (только на hover/active)
- Оптимизировать CSS transitions для лучшей производительности

#### В `app/room/[id]/page.tsx`:
- Рассмотреть увеличение интервала polling с 2 до 3 секунд (если это не критично для UX)
- Добавить мемоизацию для предотвращения лишних ре-рендеров (React.memo, useMemo, useCallback где уместно)

### 3. Визуальный feedback
- Добавить subtle loading indicator на карточке во время отправки запроса (опционально, не должен мешать)
- Сохранить все существующие hover/active эффекты

## Технические детали

### Пример flow для Optimistic UI:
```
1. User clicks card → 
2. Immediately update local state (show selected card) → 
3. Send API request in background → 
4. On success: do nothing (polling will sync) → 
5. On error: rollback local state + show error
```

### Что НЕ менять:
- Существующую структуру данных
- API endpoints
- Логику модераторских кнопок (Show/Hide estimates, Delete estimates)
- Общий дизайн и layout

## Ожидаемый результат
- Мгновенная визуальная реакция при клике на карточку (без заметного лага)
- Плавные, производительные анимации
- Graceful handling ошибок сети
- Сохранение всей существующей функциональности

## Файлы для изменения
- `/app/room/[id]/page.tsx` (основные изменения)
- `/components/poker-card.tsx` (CSS оптимизации)

## Дополнительно
Если найдешь другие очевидные performance bottlenecks — можешь их тоже исправить, но приоритет на устранение лага при голосовании.
